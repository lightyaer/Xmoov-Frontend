<ion-header>
    <ion-navbar color="primary">
        <ion-title>
            {{title}}
        </ion-title>
        <ion-buttons end>
            <button ion-button icon-only (tap)="closeModal()">
                <ion-icon name="close"></ion-icon>
            </button>
        </ion-buttons>
    </ion-navbar>
</ion-header>

<ion-content class="paddingBottom">

    <ion-item>
        <ion-label floating> {{'SALESORDER' | translate}} </ion-label>
        <ion-select interface="popover" [ngModel]="purchaseOrder._salesOrder" (ngModelChange)="purchaseOrder._salesOrder = $event"
            (ionChange)="changeValues(purchaseOrder._salesOrder)">
            <ion-option *ngFor="let item of salesOrders" [value]="item._id">{{item.itemName}}</ion-option>
        </ion-select>
    </ion-item>

    <ion-item>
        <ion-label floating>{{'ITEMCODE' | translate}}</ion-label>
        <ion-input [ngModel]="purchaseOrder.itemCode" (ngModelChange)="purchaseOrder.itemCode=$event" type="text "></ion-input>
    </ion-item>
    <ion-item>
        <ion-label floating>{{'ITEMNAME' | translate}}</ion-label>
        <ion-input [ngModel]="purchaseOrder.itemName" (ngModelChange)="purchaseOrder.itemName=$event" type="text "></ion-input>
    </ion-item>
    <ion-item>
        <ion-label floating>{{'ITEMTYPE' | translate}}</ion-label>
        <ion-input [ngModel]="purchaseOrder.itemType" (ngModelChange)="purchaseOrder.itemType=$event" type="text"></ion-input>
    </ion-item>
    <ion-item>
        <ion-label floating>{{'ITEMSUBTYPE' | translate}}</ion-label>
        <ion-input [ngModel]="purchaseOrder.itemSubType" (ngModelChange)="purchaseOrder.itemSubType=$event" type="text "></ion-input>
    </ion-item>
    <ion-item>
        <ion-label floating>{{'QUANTITY' | translate}}</ion-label>
        <ion-input [ngClass]="(isValid) ? 'correct' : 'err' " [ngModel]="purchaseOrder.quantity" (ngModelChange)="purchaseOrder.quantity=$event"
            type="number" (ngModelChange)="validateValues(purchaseOrder._salesOrder);calcTotal();"></ion-input>
    </ion-item>
    <ion-item>
        <ion-label floating>{{'UNITPRICE' | translate}}</ion-label>
        <ion-input [ngModel]="purchaseOrder.unitPrice" (ngModelChange)="purchaseOrder.unitPrice=$event" type="number" (ngModelChange)="calcTotal()"></ion-input>
    </ion-item>

    <ion-item>
        <ion-label floating>{{'TAX' | translate}}</ion-label>
        <ion-input [ngModel]="purchaseOrder.tax" (ngModelChange)="purchaseOrder.tax=$event" type="number" (ngModelChange)="calcTotal()"></ion-input>
    </ion-item>
    <ion-item>
        <ion-label floating>{{'DISCOUNT' | translate}}</ion-label>
        <ion-input [ngModel]="purchaseOrder.discount" (ngModelChange)="purchaseOrder.discount=$event" type="number" (ngModelChange)="calcTotal()"></ion-input>
    </ion-item>
    <ion-item style="margin-bottom: 55px">
        <ion-label floating>{{'TOTAL' | translate}}</ion-label>
        <ion-input readonly="true" [ngModel]="purchaseOrder.total" (ngModelChange)="purchaseOrder.total=$event" type="number"></ion-input>
    </ion-item>
</ion-content>
<div position="bottom">
    <button *ngIf="isValid" ion-button block class="buttonItem bottomButton" color="light" (click)="savePurchaseOrder()">Submit</button>
</div>